<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>提交对 <span id="name"></span> 的了解</title>
    <link rel="stylesheet" href="johari.css">
    <script>
        let userwords = ""; // 定义一个全局变量来存储 userwords

        // 获取 URL 查询参数
        function getQueryParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('name');
            userwords = urlParams.get('userwords'); // 将 userwords 存储到全局变量
            //otherwords = urlParams.get('otherwords'); // 将 otherwords 存储到全局变量
            if (name) {
                document.getElementById('name').textContent = name;
            }
        }

        function submitForm() {
            const name2 = document.getElementById('name').textContent;  // 获取姓名
            const selectedWords = Array.from(document.querySelectorAll('button.selected')).map(button => button.textContent); // 获取当前选中的词汇
            // 如果选择的词汇数量不在 5 到 6 之间，弹出提示并返回
            if (selectedWords.length < 5 || selectedWords.length > 6) {
                alert('请选择5到6个词汇！');
                return;
            }

            // 从 URL 获取之前的 otherwords 参数，并将其转换为数组
            const urlParams = new URLSearchParams(window.location.search);
            const existingOtherWords = urlParams.get('otherwords');
            const otherwordsArray = existingOtherWords ? existingOtherWords.split(',') : [];
        
            // 合并之前的 otherwords 和当前选中的词汇，去重
            const mergedWords = [...new Set([...otherwordsArray, ...selectedWords])];
        
            // 构建URL，将数据传递到 result.html 页面
            const url = new URL('result0302.html', window.location.href);
            url.searchParams.set('name', name2);  // 将姓名添加到URL中
            url.searchParams.set('userwords', userwords);  // 使用全局变量 userwords
            url.searchParams.set('otherwords', mergedWords.join(','));  // 将合并后的词汇传递到URL中
        
            // 跳转到结果页面
            window.location.href = url;
        }
        

        function toggleSelection(button) {
            button.classList.toggle('selected');
        }

        window.onload = function() {
            getQueryParams();  // 页面加载时执行getQueryParams函数
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>提交对 <span id="name"></span> 的了解</h1>
        <p>请选择五到六个您认为描述 他/她 <span id="name2"></span> 的词汇：</p>

        <!-- 使用表格布局按钮 -->
        <table class="window">
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">observant/有洞察力的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">accepting/接受能力强的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">adaptable/适应能力强的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">responsive/反应灵敏的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">searching/敏锐的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">calm/冷静的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">caring/关心他人的，贴心的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">cheerful/乐观的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">warm/暖心的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">complex/个性复杂的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">confident/自信的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">dependable/值得依赖的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">trustworthy/值得信赖的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">dignified/自尊的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">energetic/充满活力的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">friendly/友善的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">giving/慷慨的，乐于奉献的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">happy/快乐的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">helpful/乐于助人的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">idealistic/理想主义的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">independent/独立的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">tense/紧张的（侧重紧绷的状态）</button></td>
                <td><button type="button" onclick="toggleSelection(this)">nervous/焦虑的、神经质的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">extroverted/外向的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">introverted/内向的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">knowledgeable/博学的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">logical/逻辑清晰的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">loving/慈爱的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">mature/成熟的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">modest/谦虚的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">able/能干的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">organised/有条理的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">patient/耐心的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">powerful/强大的、有权势的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">kind/善良的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">proud/自豪的、骄傲的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">quiet/安静的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">reflective/深思熟虑的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">relaxed/放松的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">religious/宗教性的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">bold/鲁莽的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">brave/勇敢的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">self-assertive/果敢的，独断专行的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">self-conscious/在意别人看法的，自我意识过剩的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">sensible/通情达理的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">sentimental/多愁善感的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">shy/害羞的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">silly/傻乎乎的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">spontaneous/自然的</button></td>
                <td><button type="button" onclick="toggleSelection(this)">sympathetic/有同情心的</button></td>
            </tr>
            <tr>
                <td><button type="button" onclick="toggleSelection(this)">ingenious/机智的（侧重灵感）</button></td>
                <td><button type="button" onclick="toggleSelection(this)">intelligent/高智商的（侧重理解与思考）</button></td>
                <td><button type="button" onclick="toggleSelection(this)">clever/聪明的（侧重天资）</button></td>
                <td><button type="button" onclick="toggleSelection(this)">wise/有智慧的(侧重哲学)</button></td>
                <td><button type="button" onclick="toggleSelection(this)">witty/机智的(侧重小聪明)</button></td>
            </tr>
        </table>
        <style>
            td > button  {
               box-sizing: border-box;
            }
        </style>
        <style>
            td {
                position: relative;
            }
            td:not(:first-child) > button {
                position: absolute;
                inset: 0;
            }
        </style>

        <br><br> <!-- 添加 2 行空白 -->

        <button onclick="submitForm()">提交并查看结果</button>
    </div>
</body>
</html>
